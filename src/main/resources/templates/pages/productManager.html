<div style="margin: 0px 100px 100px 100px">
	<div>
			<table class="table table-hover">
				<thead>
					<tr>
						<td>商品名称</td>
						<td>现价</td>
						<td>原价</td>
						<td>销售量</td>
						<td>操作</td>
					</tr>
				</thead>
				<tbody  id="tBodyId">
					<tr>
						<td>数据加载中...............................</td>
					</tr>
				</tbody>
			</table>
	</div>
	<div id="pageId">
		<ul class="pagination pagination-sm no-margin pull-right">
			<li><a class="first">首页</a></li>
			<li><a class="pre">上一页</a></li>
			<li><a class="next">下一页</a></li>
			<li><a class="last">尾页</a></li>
			<li><a class="rowCount">总记录数(0)</a></li>
			<li><a class="pageCount">总页数(0)</a></li>
			<li><a class="pageCurrent" id="pageCurrentId">当前页(1)</a></li>
		</ul>
	</div>
</div>
<script type="text/javascript">
	$(function() {
		//查询显示页面数据
		doShowPage();
		//在pageId对象上注册click事件,当点击pageId对象内部的元素是执行doJumpPage函数
		$("#pageId").on("click", ".first,.pre,.next,.last", doJumpToPage);
	});

	function doShowPage() {
		var pageCurrent = $("#pageId").data("pageCurrent");
		if(!pageCurrent)
			pageCurrent = 1;
		var url = "product/doFindPageObject";
		var params = {
			"memberId" : null,
			"pageCurrent" : pageCurrent
		};
		$.getJSON(url, params, doHandleResponseResult);
	}

	function doHandleResponseResult(result) {
		console.log(result);
		if(result.state==1){
			//设置分页页面初始值
			setOriginalPage(result.data);
			//显示页面
			doSetBodyElement(result.data.records);
			//console.log(result.data);
		}else{
			alert(result.message);
		}
	}
	function doSetBodyElement(records){
		console.log(records)
		//1,获取tBody,并清空空里面内容
		var tBody = $("#tBodyId");
		tBody.empty();
		//2迭代records记录并将其追加到tbody中
		for(var i = 0 ;i<records.length;i++){
			var tr = $("<tr></tr>");
			var tds = doGetTds(records[i]);
			tr.append(tds);
			tBody.append(tr);
		}
	}
	function doGetTds(data){
		var tds = "<td>"+data.productName+"<td/>"+
				  "<td>"+data.productCurrentPrize+"<td/>"+
				  "<td>"+data.productOriginalPrize+"<td/>"+
				  "<td>"+data.productSellNum+"<td/>"+
				  "<td><button type='button' class='btn btn-default btn-update'>修改</button><td/>";
		return tds;
	}
	
	
	
	
	
	
	/* 分页查询 */
	function setOriginalPage(page){
		$(".rowCount").html("总记录数("+page.rowCount+")");
		$(".pageCount").html("总页数("+page.pageCount+")");
		$(".pageCurrent").html("当前页("+page.pageCurrent+")");
		
		$("#pageId").data("pageCurrent",page.pageCurrent);
		$("#pageId").data("pageCount",page.pageCount);
	}
	function doJumpToPage(){
		//alert(123)
		var cls = $(this).prop("class");
		var pageCount = $("#pageId").data("pageCount");
		var pageCurrent = $("#pageId").data("pageCurrent");
		
		if(cls=="first"){
			pageCurrent = 1;
		}else if(cls=="pre" && pageCurrent>1){
			pageCurrent--;
		}else if(cls=="next" && pageCurrent<pageCount){
			pageCurrent++;
		}else if(cls=="last" ){
			pageCurrent=pageCount;
		}else{
			return;
		}
		
		$("#pageId").data("pageCurrent", pageCurrent);
		doShowPage();
	}
	
</script>
